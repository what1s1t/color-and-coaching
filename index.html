<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color and Coaching 컬러앤코칭 - 자아 인식 및 관계 진단/솔루션</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Meta Information -->
    <meta name="description" content="컬러앤코칭은 DISC, FIRO-B, Colour Mirrors System을 통해 개인의 자아 인식, 커플 관계, 조직 팀워크 향상을 위한 진단, 리딩, 교육 프로그램을 전문적으로 제공하는 웹사이트입니다.">

    <script>
        // Tailwind Configuration for custom colors
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'warm-primary': '#B87333', /* Copper (Main Brand Color) */
                        'warm-secondary': '#CD7F32', /* Bronze */
                        'soft-beige': '#f5e7dc', /* Soft light brown/beige */
                        'copper-dark': '#8B4513', /* SaddleBrown for deeper accents */
                        'magenta-new': '#c32672', /* Header title color */
                    }
                }
            }
        }
    </script>

    <style>
        /* Loading Spinner Animation */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #B87333; /* warm-primary color */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased font-sans">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-lg sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#home" class="text-2xl font-extrabold text-warm-primary rounded-lg p-1">
                Color and Coaching 컬러앤코칭
            </a>
            
            <button id="menu-button" class="sm:hidden p-2 rounded-md hover:bg-soft-beige focus:outline-none focus:ring-2 focus:ring-warm-primary">
                <svg class="w-6 h-6 text-warm-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>

            <!-- Desktop Navigation: '문의'를 버튼으로 강조 -->
            <nav class="hidden sm:flex items-center space-x-4 text-lg font-medium">
                <a href="#home" class="text-gray-600 hover:text-warm-primary transition duration-300">홈</a>
                <a href="#services" class="text-gray-600 hover:text-warm-primary transition duration-300">서비스</a>
                <a href="#assessments" class="text-gray-600 hover:text-warm-primary transition duration-300">진단 도구</a>
                <a href="#color-therapy" class="text-gray-600 hover:text-warm-primary transition duration-300">컬러 테라피</a>
                
                <!-- 문의 버튼 스타일 -->
                <a href="#contact" class="px-4 py-2 bg-warm-primary text-white font-semibold rounded-full shadow-md hover:bg-copper-dark transition duration-300">
                    문의
                </a>
            </nav>
        </div>
        
        <!-- Mobile Menu Dropdown: '문의'를 버튼으로 강조 -->
        <div id="mobile-menu" class="hidden sm:hidden bg-white border-t border-soft-beige">
            <nav class="px-2 pt-2 pb-3 space-y-1">
                <a href="#home" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-soft-beige transition duration-300">홈</a>
                <a href="#services" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-soft-beige transition duration-300">서비스</a>
                <a href="#assessments" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-soft-beige transition duration-300">진단 도구</a>
                <a href="#color-therapy" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-soft-beige transition duration-300">컬러 테라피</a>
                <!-- 문의 버튼 스타일 (모바일 전체 너비) -->
                <a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-white text-center bg-warm-primary hover:bg-copper-dark transition duration-300 shadow-md mt-2">
                    문의
                </a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="bg-white py-20 md:py-32 text-center border-b border-soft-beige">
        <div class="max-w-4xl mx-auto px-4">
            <h1 class="text-4xl sm:text-6xl font-extrabold leading-tight mb-4">
                <span class="text-gray-800">당신의 성장을 위한</span> <span class="text-magenta-new">컬러앤코칭</span>
            </h1>
            <p class="text-lg sm:text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                DISC, FIRO-B, Colour Mirrors System을 통해 <br class="sm:hidden">개인, 커플, 조직의 잠재력을 일깨우는 전문 진단/솔루션을 제공합니다.
            </p>
            <a href="#contact" class="inline-block px-8 py-3 bg-warm-primary text-white text-lg font-semibold rounded-full shadow-xl hover:bg-copper-dark transition duration-300 transform hover:scale-105">
                문의하기
            </a>
        </div>
    </section>

    <!-- Services Section (4 Columns) - 이미지 생성 결과 표시 -->
    <section id="services" class="py-16 md:py-24 bg-soft-beige">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12 text-gray-800">
                컬러앤코칭 주요 서비스
            </h2>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">

                <!-- 1. 개인 자아 인식 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-service-1" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Professional photo of a diverse, multiracial individual meditating or self-reflecting in a calm, warm setting, cinematic lighting, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">개인 자아 인식</h3>
                    <p class="text-gray-600 text-center text-sm">
                        DISC와 Colour Mirrors System을 활용하여 자신의 행동 패턴, 강점, 숨겨진 잠재력을 깊이 이해하고 진정한 나를 발견하도록 돕는 자아 성장 솔루션을 제공합니다.
                    </p>
                </div>

                <!-- 2. 커플 관계 개선 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-service-2" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Professional photo of a happy, multiracial couple sitting across from each other, smiling and connecting, showing effective communication, soft light, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">커플 관계 개선</h3>
                    <p class="text-gray-600 text-center text-sm">
                        FIRO-B와 DISC 진단을 통해 서로의 관계 욕구와 행동 스타일 차이를 파악하고 건강한 소통 방식을 찾도록 돕는 관계 개선 프로그램을 진행합니다.
                    </p>
                </div>

                <!-- 3. 조직 팀워크 향상 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-service-3" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Dynamic photo of a diverse, multiracial team collaborating around a modern table, hands reaching together to symbolize teamwork, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">조직 팀워크 향상</h3>
                    <p class="text-gray-600 text-center text-sm">
                        DISC, FIRO-B 등 전문 진단 도구를 활용하여 팀원 간 역동성 분석 및 최적의 팀 빌딩 전략을 제시하고 실행을 지원합니다.
                    </p>
                </div>
                
                <!-- 4. 기업/그룹 맞춤형 강의 및 워크숍 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-service-4" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Professional photo of a multiracial coach presenting to a diverse group of attentive trainees in a bright conference room, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">기업/그룹 맞춤형 강의 및 워크숍</h3>
                    <p class="text-gray-600 text-center text-sm">
                        조직의 특성에 맞는 DISC, FIRO-B 기반의 맞춤형 강의 및 워크숍을 기획하고 진행하여 실질적인 성장을 지원합니다.
                    </p>
                </div>

            </div>
        </div>
    </section>

    <!-- Assessment Tools Section (진단 도구 상세 설명 - 이미지 생성 결과 표시) -->
    <section id="assessments" class="py-16 md:py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12 text-gray-800">
                컬러앤코칭 진단 도구 소개
            </h2>

            <div class="space-y-12">
                
                <!-- DISC -->
                <div class="flex flex-col md:flex-row items-center bg-soft-beige p-6 rounded-xl shadow-lg">
                    <div class="md:w-1/4 flex-shrink-0 mb-4 md:mb-0 text-center">
                        <div id="img-disc" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                             data-prompt="Abstract art representation of the four DISC personality quadrants using red (Dominance), yellow (Influence), green (Steadiness), and blue (Conscientiousness) color blocks, minimalist, graphic design.">
                            <div class="spinner"></div>
                        </div>
                        <span class="text-5xl font-extrabold text-warm-primary block mt-4">DISC</span>
                        <p class="text-sm text-gray-500 mt-1">행동 유형 진단</p>
                    </div>
                    <div class="md:ml-8 md:w-3/4">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">DISC 행동 유형 진단: 나를 이해하는 첫걸음</h3>
                        <p class="text-gray-600">
                            DISC는 개인의 <strong>주도형(Dominance), 사교형(Influence), 안정형(Steadiness), 신중형(Conscientiousness)</strong> 네 가지 핵심 행동 스타일을 측정하는 국제적인 진단 도구입니다. 이 진단을 통해 자신의 선호하는 행동 패턴, 업무 스타일, 스트레스 반응 방식을 명확히 파악할 수 있으며, 타인과의 상호작용 방식, 팀 내에서의 역할, 그리고 효과적인 의사소통 전략을 구축하는 데 필수적인 통찰력을 제공하여 자기 이해와 대인 관계 능력을 향상시킵니다.
                        </p>
                    </div>
                </div>

                <!-- FIRO-B -->
                <div class="flex flex-col md:flex-row items-center bg-soft-beige p-6 rounded-xl shadow-lg">
                    <div class="md:w-1/4 flex-shrink-0 mb-4 md:mb-0 text-center">
                        <div id="img-firob" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                             data-prompt="High-quality, abstract photo art showing three overlapping circles or connected human figures, symbolizing Inclusion, Control, and Affection (FIRO-B). Use soft blue and green tones, professional photo.">
                            <div class="spinner"></div>
                        </div>
                        <span class="text-5xl font-extrabold text-warm-secondary block mt-4">FIRO-B</span>
                        <p class="text-sm text-gray-500 mt-1">관계 욕구 진단</p>
                    </div>
                    <div class="md:ml-8 md:w-3/4">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">FIRO-B 관계 욕구 진단: 관계 갈등의 근본 원인 파악</h3>
                        <p class="text-gray-600">
                            FIRO-B (Fundamental Interpersonal Relations Orientation – Behavior)는 인간관계에서 충족시키고자 하는 <strong>소속(Inclusion), 통제(Control), 정서(Affection)</strong>의 세 가지 핵심 욕구를 측정합니다. 이 진단은 <strong>표현 욕구</strong>와 <strong>기대 욕구</strong>를 세밀하게 분석하여 관계 역동성을 이해하도록 돕습니다. 특히 커플 관계나 팀 내에서 발생하는 잦은 갈등, 소외감, 권력 다툼 등의 근본적인 관계 욕구 차이를 정확하게 파악하고, 상대방의 진정한 욕구를 이해함으로써 건강하고 만족스러운 관계 개선 솔루션을 찾을 수 있습니다.
                        </p>
                    </div>
                </div>

                <!-- Colour Mirrors System -->
                <div class="flex flex-col md:flex-row items-center bg-soft-beige p-6 rounded-xl shadow-lg">
                    <div class="md:w-1/4 flex-shrink-0 mb-4 md:mb-0 text-center">
                        <div id="img-cm-assessment" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                             data-prompt="Professional, high-resolution photograph of vibrant, colorful two-layered oil bottles (Colour Mirrors system) standing on a reflective surface, clean and spiritual aesthetic.">
                            <div class="spinner"></div>
                        </div>
                        <span class="text-5xl font-extrabold text-magenta-new block mt-4">Colour Mirrors System</span>
                        <p class="text-sm text-gray-500 mt-1">내면 심리 진단</p>
                    </div>
                    <div class="md:ml-8 md:w-3/4">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">Colour Mirrors System: 무의식과 내면의 치유</h3>
                        <p class="text-gray-600">
                            Colour Mirrors System은 다채로운 색상 오일과 에센스를 활용하여, 개인이 <strong>무의식적으로 선택한 색</strong>을 통해 현재의 감정 상태, 과거의 경험, 그리고 앞으로의 잠재적 변화를 직관적으로 탐색하는 심리 분석 도구입니다. 색상의 상징성과 에너지를 통해 내면의 메시지를 읽어내고, 억압된 감정이나 패턴을 인지하게 하여 스스로 치유와 성장의 길을 찾도록 돕습니다. 깊이 있는 자기 이해와 정서적 안정감을 찾는 데 매우 효과적입니다.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Color Therapy & Certification Section - 이미지 생성 결과 표시 -->
    <section id="color-therapy" class="py-16 md:py-24 bg-soft-beige">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12 text-gray-800">
                컬러 테라피 및 컬러 테라피스트 자격과정
            </h2>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- 1. 컬러 테라피스트 자격과정 및 리딩 컨설팅 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-therapy-1" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Professional photo of a multiracial group of students holding Colour Mirrors oil bottles during a certification class, looking focused and engaged, soft, professional lighting, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">컬러 테라피스트 자격과정 및 리딩 컨설팅</h3>
                    <p class="text-gray-600 text-center text-sm">
                        컬러 테라피 전문가로 성장하기 위한 체계적인 이론 학습과 실습, 자격증 취득 과정을 제공합니다. 개인의 리딩 능력 향상을 위한 맞춤형 멘토링이 포함됩니다.
                    </p>
                </div>

                <!-- 2. 1:1 맞춤 컬러 테라피 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-therapy-2" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="Professional photo of a multiracial therapist gently consulting with a client 1:1, with Colour Mirrors bottles subtly placed on the table, warm light, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">1:1 맞춤 컬러 테라피</h3>
                    <p class="text-gray-600 text-center text-sm">
                        개인의 현재 감정 상태와 이슈에 집중하여 Colour Mirrors 오일 리딩을 진행합니다. 심층적인 대화를 통해 정서적 안정과 문제 해결을 위한 맞춤형 솔루션을 제공합니다.
                    </p>
                </div>

                <!-- 3. 1:1 컬러 테라피 집중 패키지 -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
                    <div id="img-therapy-3" class="aspect-video w-full rounded-lg mb-4 shadow-md overflow-hidden flex items-center justify-center h-40"
                         data-prompt="A cinematic photo of a multiracial person looking confidently towards a bright, colorful path or horizon, symbolizing focused growth and transformation, photorealistic.">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">1:1 컬러 테라피 집중 패키지</h3>
                    <p class="text-gray-600 text-center text-sm">
                        지속적인 컬러 리딩과 상담, 개인에 맞는 컬러 명상 진행으로 삶의 근본적인 변화를 경험할 수 있습니다. 3회 또는 5회 패키지 선택 가능합니다.
                    </p>
                </div>

            </div>
        </div>
    </section>
    
    <!-- Contact & Consultation Form -->
    <section id="contact" class="py-16 md:py-24 bg-warm-primary">
        <div class="max-w-4xl mx-auto px-4 text-center text-white">
            <h2 class="text-3xl sm:text-4xl font-bold mb-4">
                지금, 당신의 성장 여정을 시작하세요
            </h2>
            <p class="text-xl mb-8 opacity-90">
                개인, 커플, 조직 모두 환영합니다. 컬러앤코칭이 당신의 '내면의 연결'을 도와드리겠습니다.
            </p>
            
            <form id="contact-form" class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl text-left space-y-4">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">문의하기</h3>
                
                <div>
                    <label for="name-input" class="block text-sm font-medium text-gray-700">성함 / 연락처</label>
                    <input type="text" id="name-input" name="name" required class="mt-1 block w-full px-4 py-3 border border-soft-beige rounded-lg shadow-sm focus:ring-warm-primary focus:border-warm-primary transition duration-300">
                </div>
                
                <div>
                    <label for="email-input" class="block text-sm font-medium text-gray-700">이메일 주소</label>
                    <input type="email" id="email-input" name="email" required class="mt-1 block w-full px-4 py-3 border border-soft-beige rounded-lg shadow-sm focus:ring-warm-primary focus:border-warm-primary transition duration-300">
                </div>
                
                <div>
                    <label for="message-input" class="block text-sm font-medium text-gray-700">문의 내용</label>
                    <textarea id="message-input" name="message" rows="4" required class="mt-1 block w-full px-4 py-3 border border-soft-beige rounded-lg shadow-sm focus:ring-warm-primary focus:border-warm-primary transition duration-300"></textarea>
                </div>
                
                <button type="submit" class="w-full mt-6 px-4 py-3 bg-warm-secondary text-gray-800 font-semibold rounded-lg shadow-md hover:bg-amber-600 transition duration-300 transform hover:scale-105">
                    문의 요청 보내기
                </button>

                <!-- Custom Message Box for Feedback -->
                <div id="contact-message-box" class="hidden mt-4 p-4 rounded-lg text-sm text-center font-medium" role="alert"></div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-copper-dark py-10 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h4 class="text-xl font-bold mb-2">Color and Coaching 컬러앤코칭</h4>
            <p class="text-gray-300 mb-4">내면의 연결, 삶의 변화</p>
            <div class="text-sm text-gray-400 space-y-1">
                <p>대표: 김영정</p>
                <p>이메일: contact@colorandcoaching.co.kr</p>
                <p>전화번호: 070-7534-2883</p>
                <p>사업자 등록번호: 6175900301</p>
                <p class="mt-4">&copy; 2024 Color and Coaching. All rights reserved.</p>
            </div>
        </div>
    </footer>


    <script>
        // Mobile menu toggle logic
        document.getElementById('menu-button').addEventListener('click', function() {
            var mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });

        // Simple contact form submission handler
        document.getElementById('contact-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const messageBox = document.getElementById('contact-message-box');
            
            // For demonstration, show success message
            messageBox.textContent = '문의가 성공적으로 접수되었습니다. 곧 연락드리겠습니다.';
            messageBox.className = 'mt-4 p-4 bg-green-100 text-green-800 rounded-lg text-sm text-center font-medium';
            messageBox.classList.remove('hidden');
            
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 5000);

            this.reset();
        });

        // --------------------------------------------------------
        // Gemini Image Generation Logic
        // --------------------------------------------------------

        const IMAGE_MODEL = 'imagen-4.0-generate-001';
        const API_KEY = ""; // Canvas will provide this at runtime

        /**
         * Retries the fetch request with exponential backoff.
         * @param {string} url The API endpoint URL.
         * @param {object} options Fetch request options.
         * @param {number} maxRetries Maximum number of retries.
         * @returns {Promise<Response>} The successful response.
         */
        async function fetchWithRetry(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.ok) {
                        return response;
                    } else if (response.status === 429) { // Rate limit or transient error
                        if (i < maxRetries - 1) {
                            const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }
                    }
                    throw new Error(`API request failed with status ${response.status}`);
                } catch (error) {
                    if (i === maxRetries - 1) {
                        throw error;
                    }
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        /**
         * Generates an image using the Gemini API and updates the corresponding container.
         * @param {string} containerId The ID of the HTML element to hold the image.
         * @param {string} prompt The text prompt for image generation.
         */
        async function generateImage(containerId, prompt) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Show loading spinner
            container.innerHTML = '<div class="spinner"></div>';
            container.classList.add('flex', 'items-center', 'justify-center');

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${IMAGE_MODEL}:predict?key=${API_KEY}`;
            const payload = { 
                instances: { prompt: prompt }, 
                parameters: { 
                    sampleCount: 1,
                    aspectRatio: "16:9" 
                } 
            };

            try {
                const response = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                
                if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                    const base64Data = result.predictions[0].bytesBase64Encoded;
                    const imageUrl = `data:image/png;base64,${base64Data}`;
                    
                    // Create and insert the image element
                    const img = new Image();
                    img.src = imageUrl;
                    img.alt = prompt;
                    img.className = 'w-full h-full object-cover rounded-lg shadow-md';
                    
                    // Clear spinner and insert image
                    container.innerHTML = '';
                    container.appendChild(img);
                    container.classList.remove('flex', 'items-center', 'justify-center');

                } else {
                    const errorMessage = result.error?.message || "이미지 생성 실패";
                    container.innerHTML = `<p class="text-sm text-red-600 text-center p-2">오류: ${errorMessage}</p>`;
                }
            } catch (error) {
                console.error("Image generation error:", error);
                container.innerHTML = `<p class="text-sm text-red-600 text-center p-2">이미지 로딩 중 오류가 발생했습니다.</p>`;
            }
        }

        // Run image generation for all containers on window load
        window.onload = function() {
            const containers = document.querySelectorAll('[data-prompt]');
            containers.forEach(container => {
                const id = container.id;
                const prompt = container.getAttribute('data-prompt');
                generateImage(id, prompt);
            });
        };
    </script>
</body>
</html>
